# ============================================================================
# REORDER & PROCUREMENT
# ============================================================================

"""
AI-generated reorder suggestion based on historical sales and inventory.
"""
type ReorderSuggestion @table {
  id: UUID! @default(expr: "uuidV4()")
  product: Product!
  productId: UUID!
  location: Location!
  locationId: UUID!
  business: Business!
  businessId: UUID!

  # Recommendation
  recommendedQuantity: Int!
  urgencyLevel: UrgencyLevel! @col(dataType: "urgency_level")

  # Reasoning
  currentStock: Int!
  minimumStockLevel: Int!
  averageDailyUsage: Float!
  projectedStockoutDate: Date

  # Seasonality (learned by AI)
  seasonalPattern: String @col(dataType: "jsonb")
  isSeasonalPeak: Boolean! @default(value: false)

  # Suggested Supplier
  suggestedSupplier: Supplier!
  suggestedSupplierId: UUID!
  estimatedCost: Float!

  # Status
  status: ReorderSuggestionStatus! @col(dataType: "reorder_suggestion_status")
  convertedToPurchaseRequisition: Boolean! @default(value: false)
  purchaseRequisition: PurchaseRequisition
  purchaseRequisitionId: UUID

  # Metadata
  generatedAt: Timestamp! @default(expr: "request.time")
  expiresAt: Timestamp!
}

"""
Seasonal sales pattern learned by AI.
"""
type SeasonalPattern @table {
  id: UUID! @default(expr: "uuidV4()")
  productId: UUID!
  january: Float!
  february: Float!
  march: Float!
  april: Float!
  may: Float!
  june: Float!
  july: Float!
  august: Float!
  september: Float!
  october: Float!
  november: Float!
  december: Float!
  confidenceLevel: Float!
  learnedFrom: DateRange!
  lastUpdated: Timestamp!
}



