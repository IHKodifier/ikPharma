# ============================================================================
# FINANCIAL RECORDS & ACCOUNTING
# ============================================================================

"""
Financial record for accounting entries.
"""
type FinancialRecord @table {
  id: UUID! @default(expr: "uuidV4()")
  business: Business!
  businessId: UUID!

  # Entry Details
  entryDate: Date!
  entryType: FinancialEntryType! @col(dataType: "financial_entry_type")
  referenceNumber: String @col(dataType: "varchar(50)")

  # Description
  description: String! @col(dataType: "varchar(500)")

  # Amounts
  debitAmount: Float! @default(value: 0)
  creditAmount: Float! @default(value: 0)

  # Accounts
  debitAccount: String! @col(dataType: "varchar(100)")
  creditAccount: String! @col(dataType: "varchar(100)")

  # Related Entities
  relatedTransaction: SalesTransaction
  relatedTransactionId: UUID
  relatedPurchaseOrder: PurchaseOrder
  relatedPurchaseOrderId: UUID

  # Audit
  createdAt: Date! @default(expr: "request.time")
  createdBy: User!
  createdById: String!
}

"""
Invoice for sales or purchases.
"""
type Invoice @table {
  id: UUID! @default(expr: "uuidV4()")
  business: Business!
  businessId: UUID!

  # Invoice Details
  invoiceNumber: String! @col(dataType: "varchar(50)")
  invoiceDate: Date!
  dueDate: Date!

  # Parties
  fromEntity: String! @col(dataType: "varchar(255)")  # Business or Supplier
  toEntity: String! @col(dataType: "varchar(255)")    # Customer or Business

  # Related Records
  salesTransaction: SalesTransaction
  salesTransactionId: UUID
  purchaseOrder: PurchaseOrder
  purchaseOrderId: UUID

  # Financial
  subtotal: Float!
  taxAmount: Float!
  discountAmount: Float! @default(value: 0)
  totalAmount: Float!

  # Status
  status: InvoiceStatus! @col(dataType: "invoice_status")
  paidAmount: Float! @default(value: 0)
  balanceDue: Float!

  # Audit
  createdAt: Timestamp! @default(expr: "request.time")
  createdBy: User!
  createdById: String!
}



